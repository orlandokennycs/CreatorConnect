{"ast":null,"code":"'use strict';\n\nconst Aspect = require('./operation').Aspect;\n\nconst defineAspects = require('./operation').defineAspects;\n\nconst loadCursor = require('../dynamic_loaders').loadCursor;\n\nconst OperationBase = require('./operation').OperationBase;\n\nconst nextObject = require('./common_functions').nextObject;\n\nclass HasNextOperation extends OperationBase {\n  constructor(cursor) {\n    super();\n    this.cursor = cursor;\n  }\n\n  execute(callback) {\n    const cursor = this.cursor;\n    let Cursor = loadCursor();\n\n    if (cursor.s.currentDoc) {\n      return callback(null, true);\n    }\n\n    if (cursor.isNotified()) {\n      return callback(null, false);\n    }\n\n    nextObject(cursor, (err, doc) => {\n      if (err) return callback(err, null);\n      if (cursor.s.state === Cursor.CLOSED || cursor.isDead()) return callback(null, false);\n      if (!doc) return callback(null, false);\n      cursor.s.currentDoc = doc;\n      callback(null, true);\n    });\n  }\n\n}\n\ndefineAspects(HasNextOperation, Aspect.SKIP_SESSION);\nmodule.exports = HasNextOperation;","map":null,"metadata":{},"sourceType":"script"}